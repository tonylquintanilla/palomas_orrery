# Paloma's Orrery - System Architecture (ASCII Visualization)

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    ğŸŒ  EXTERNAL DATA SOURCES  (Layer 1)                        â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”ƒ
â”ƒ   â”‚ JPL Horizons â”‚  â”‚   Stellar    â”‚  â”‚   Climate    â”‚  â”‚   Messier    â”‚    â”ƒ
â”ƒ   â”‚   (Orbits)   â”‚  â”‚   Catalogs   â”‚  â”‚     Data     â”‚  â”‚   Catalog    â”‚    â”ƒ
â”ƒ   â”‚              â”‚  â”‚ Gaia/Hippar/ â”‚  â”‚ NOAA/NASA/   â”‚  â”‚  (Deep Sky)  â”‚    â”ƒ
â”ƒ   â”‚              â”‚  â”‚    SIMBAD    â”‚  â”‚    NSIDC     â”‚  â”‚              â”‚    â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”ƒ
â”ƒ          â”‚                 â”‚                  â”‚                 â”‚            â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”›
           â”‚                 â”‚                  â”‚                 â”‚
           â–¼                 â–¼                  â–¼                 â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    ğŸ“¥  DATA ACQUISITION  (Layer 2)                             â”ƒ
â”ƒ                                    6 modules                                   â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ   â”‚  Solar System        Stellar Data       Climate Data    Deep Sky       â”‚  â”ƒ
â”ƒ   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”€â”€â”€â”€â”€â”€â”€â”€       â”‚  â”ƒ
â”ƒ   â”‚  orbit_data_mgr.py   data_acquisition   fetch_climate   messier_       â”‚  â”ƒ
â”ƒ   â”‚                      _distance.py        _data.py        catalog.py     â”‚  â”ƒ
â”ƒ   â”‚                      simbad_manager.py   fetch_paleo                    â”‚  â”ƒ
â”ƒ   â”‚                                          _data.py                        â”‚  â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                                      â”‚                                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                       â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    ğŸ’¾  CACHE MANAGEMENT  (Layer 3)                             â”ƒ
â”ƒ                          4 managers + 2 utilities                              â”ƒ
â”ƒ                    "Defense-in-Depth Data Protection"                          â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”ƒ
â”ƒ   â”‚  Orbit Cache   â”‚  â”‚ Stellar Cache  â”‚  â”‚ Climate Cache  â”‚                 â”ƒ
â”ƒ   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚                 â”ƒ
â”ƒ   â”‚  orbit_cache/  â”‚  â”‚ vot_cache_     â”‚  â”‚ climate_cache_ â”‚                 â”ƒ
â”ƒ   â”‚  JSON files    â”‚  â”‚ manager.py     â”‚  â”‚ manager.py     â”‚                 â”ƒ
â”ƒ   â”‚                â”‚  â”‚ incremental_   â”‚  â”‚                â”‚                 â”ƒ
â”ƒ   â”‚  verify_orbit_ â”‚  â”‚ cache_mgr.py   â”‚  â”‚ climate_cache/ â”‚                 â”ƒ
â”ƒ   â”‚  cache.py      â”‚  â”‚                â”‚  â”‚ JSON files     â”‚                 â”ƒ
â”ƒ   â”‚  (repair)      â”‚  â”‚ .vot/.pkl      â”‚  â”‚                â”‚                 â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”ƒ
â”ƒ            â”‚                   â”‚                    â”‚                         â”ƒ
â”ƒ            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”ƒ
â”ƒ                                â”‚                                              â”ƒ
â”ƒ                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”ƒ
â”ƒ                    â”‚  create_cache_backups â”‚  (Protection Layer)              â”ƒ
â”ƒ                    â”‚  protect_all_caches() â”‚                                  â”ƒ
â”ƒ                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”ƒ
â”ƒ                                â”‚                                              â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                 â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    âš™ï¸  DATA PROCESSING  (Layer 4)                              â”ƒ
â”ƒ                              8 modules                                         â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ   â”‚ Coordinate Proc     â”‚  â”‚ Stellar Parameters  â”‚  â”‚ Orbital Mechanics    â”‚ â”ƒ
â”ƒ   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚ â”ƒ
â”ƒ   â”‚ data_processing.py  â”‚  â”‚ stellar_parameters  â”‚  â”‚ refined_orbits.py    â”‚ â”ƒ
â”ƒ   â”‚ celestial_coords.py â”‚  â”‚ stellar_data_       â”‚  â”‚ idealized_orbits.py  â”‚ â”ƒ
â”ƒ   â”‚                     â”‚  â”‚ patches.py          â”‚  â”‚ orrery_integration   â”‚ â”ƒ
â”ƒ   â”‚ RA/Dec â†’ Cartesian  â”‚  â”‚ enhanced_star_      â”‚  â”‚ apsidal_markers.py   â”‚ â”ƒ
â”ƒ   â”‚                     â”‚  â”‚ properties.py       â”‚  â”‚                      â”‚ â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”ƒ
â”ƒ   â”‚ Analysis & Classification: object_type_analyzer.py, catalog_select   â”‚    â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”ƒ
â”ƒ                                      â”‚                                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                       â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    ğŸ¨  VISUALIZATION PREPARATION  (Layer 5)                    â”ƒ
â”ƒ                               27+ modules                                      â”ƒ
â”ƒ                    (Largest layer - rendering & prep)                          â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”ƒ
â”ƒ   â”‚ Solar System     â”‚  â”‚ Stellar          â”‚  â”‚ Planetary Shells (12)    â”‚   â”ƒ
â”ƒ   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€          â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”ƒ
â”ƒ   â”‚ planet_viz.py    â”‚  â”‚ visualization_   â”‚  â”‚ solar, mercury, venus,   â”‚   â”ƒ
â”ƒ   â”‚ planet_viz_      â”‚  â”‚ 3d.py            â”‚  â”‚ earth, mars, jupiter,    â”‚   â”ƒ
â”ƒ   â”‚ utilities.py     â”‚  â”‚ visualization_   â”‚  â”‚ saturn, uranus, neptune, â”‚   â”ƒ
â”ƒ   â”‚ palomas_orrery_  â”‚  â”‚ 2d.py            â”‚  â”‚ pluto, eris, planet9     â”‚   â”ƒ
â”ƒ   â”‚ helpers.py       â”‚  â”‚ visualization_   â”‚  â”‚                          â”‚   â”ƒ
â”ƒ   â”‚                  â”‚  â”‚ core.py          â”‚  â”‚ Reference-frame          â”‚   â”ƒ
â”ƒ   â”‚                  â”‚  â”‚                  â”‚  â”‚ independent rendering    â”‚   â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”ƒ
â”ƒ   â”‚ Exoplanet (4)    â”‚  â”‚ Specialized: asteroid_belt, comet, moon shells   â”‚ â”ƒ
â”ƒ   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚  â”‚ (dual-tail structures, sodium tail viz, etc.)    â”‚ â”ƒ
â”ƒ   â”‚ exoplanet_sys    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”ƒ
â”ƒ   â”‚ exoplanet_orbits â”‚                                                        â”ƒ
â”ƒ   â”‚ exoplanet_coords â”‚                                                        â”ƒ
â”ƒ   â”‚ exoplanet_stell  â”‚                                                        â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”ƒ
â”ƒ                                      â”‚                                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                       â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    ğŸ–¥ï¸  USER INTERFACE  (Layer 6)                               â”ƒ
â”ƒ                              8+ modules                                        â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ   â”‚                       Main Application                                  â”‚  â”ƒ
â”ƒ   â”‚         palomas_orrery.py  (404KB, 8,289 lines)                        â”‚  â”ƒ
â”ƒ   â”‚         â€¢ plot_objects() - 3D static plots                             â”‚  â”ƒ
â”ƒ   â”‚         â€¢ animate_objects() - time evolution animations                â”‚  â”ƒ
â”ƒ   â”‚         â€¢ Three-column tkinter layout                                  â”‚  â”ƒ
â”ƒ   â”‚         â€¢ Launches 3 specialized GUIs â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚  â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                                                             â”‚                  â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”ƒ
â”ƒ   â”‚                                                                            â”ƒ
â”ƒ   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ   â””â”€â†’â”‚ star_visualization_ â”‚  â”‚ earth_system_       â”‚  â”‚ orbital_param_   â”‚  â”ƒ
â”ƒ      â”‚ gui.py              â”‚  â”‚ visualization_gui   â”‚  â”‚ viz.py           â”‚  â”ƒ
â”ƒ      â”‚                     â”‚  â”‚                     â”‚  â”‚                  â”‚  â”ƒ
â”ƒ      â”‚ HR diagrams &       â”‚  â”‚ Climate Data Hub    â”‚  â”‚ Orbital Mechanicsâ”‚  â”ƒ
â”ƒ      â”‚ stellar neighborhoodâ”‚  â”‚ 9 visualizations    â”‚  â”‚ Education Tool   â”‚  â”ƒ
â”ƒ      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ   â”‚  HR Diagram Variants (4 modules)                                       â”‚  â”ƒ
â”ƒ   â”‚  hr_diagram_distance.py, hr_diagram_apparent_magnitude.py              â”‚  â”ƒ
â”ƒ   â”‚  planetarium_distance.py, planetarium_apparent_magnitude.py            â”‚  â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                                      â”‚                                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                       â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    ğŸ“Š  REPORTING & DATA EXCHANGE  (Layer 7)                    â”ƒ
â”ƒ                              3 modules                                         â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”ƒ
â”ƒ   â”‚ plot_data_exchange   â”‚  â”‚ report_manager.py    â”‚  â”‚ plot_data_report_â”‚   â”ƒ
â”ƒ   â”‚ save/load_plot_data()â”‚  â”‚ generate_report()    â”‚  â”‚ widget.py        â”‚   â”ƒ
â”ƒ   â”‚                      â”‚  â”‚ Scientific stats     â”‚  â”‚ Display reports  â”‚   â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”ƒ
â”ƒ                                      â”‚                                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                       â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ     ğŸ”§  UTILITIES & SUPPORT  (Layer 8)  +  ğŸ“‹  CONFIGURATION  (Layer 9)       â”ƒ
â”ƒ                          Cross-cutting layers                                  â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ   â”‚  Utilities (5 modules):                                                â”‚  â”ƒ
â”ƒ   â”‚  save_utils.py, formatting_utils.py, shared_utilities.py,             â”‚  â”ƒ
â”ƒ   â”‚  shutdown_handler.py, visualization_utils.py                           â”‚  â”ƒ
â”ƒ   â”‚                                                                         â”‚  â”ƒ
â”ƒ   â”‚  Support Layers 5-10 with: save/export, text formatting,              â”‚  â”ƒ
â”ƒ   â”‚  UI components, cleanup                                                â”‚  â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”ƒ
â”ƒ   â”‚  Configuration (2 modules):                                            â”‚  â”ƒ
â”ƒ   â”‚  constants_new.py (174KB!) - orbital parameters, physical constants    â”‚  â”ƒ
â”ƒ   â”‚  star_notes.py - educational content, cultural references              â”‚  â”ƒ
â”ƒ   â”‚                                                                         â”‚  â”ƒ
â”ƒ   â”‚  Support Layers 4-6 with: reference data, physical constants           â”‚  â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”ƒ
â”ƒ                                      â”‚                                         â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”¿â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                                       â–¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                                                                                â”ƒ
â”ƒ                    ğŸ“  FINAL OUTPUTS  (Layer 10)                               â”ƒ
â”ƒ                                                                                â”ƒ
â”ƒ   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”ƒ
â”ƒ   â”‚ Interactive      â”‚  â”‚ Data Files       â”‚  â”‚ Cache Dirs       â”‚           â”ƒ
â”ƒ   â”‚ Plots            â”‚  â”‚                  â”‚  â”‚                  â”‚           â”ƒ
â”ƒ   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€         â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚           â”ƒ
â”ƒ   â”‚ PNG files        â”‚  â”‚ JSON data        â”‚  â”‚ orbit_cache/     â”‚           â”ƒ
â”ƒ   â”‚ HTML files       â”‚  â”‚ VOTable (.vot)   â”‚  â”‚ climate_cache/   â”‚           â”ƒ
â”ƒ   â”‚                  â”‚  â”‚ Pickle (.pkl)    â”‚  â”‚                  â”‚           â”ƒ
â”ƒ   â”‚ (Interactive     â”‚  â”‚                  â”‚  â”‚ (Persistent      â”‚           â”ƒ
â”ƒ   â”‚  Plotly views)   â”‚  â”‚ last_plot_data   â”‚  â”‚  storage for     â”‚           â”ƒ
â”ƒ   â”‚                  â”‚  â”‚ reports/         â”‚  â”‚  reuse)          â”‚           â”ƒ
â”ƒ   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”ƒ
â”ƒ                                                                                â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

---

## Three Parallel Data Pipelines

The system processes three distinct types of astronomical data through the same architectural layers:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  ğŸŒŸ  SOLAR SYSTEM PIPELINE  (30+ modules)                                   â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                â”‚
â”‚                                                                             â”‚
â”‚  JPL Horizons â”€â”€â†’ orbit_data_manager â”€â”€â†’ orbit_cache/ â”€â”€â†’                  â”‚
â”‚  refined_orbits â”€â”€â†’ planet_visualization â”€â”€â†’ palomas_orrery â”€â”€â†’             â”‚
â”‚  plot_objects() â”€â”€â†’ PNG/HTML                                                â”‚
â”‚                                                                             â”‚
â”‚  Features: 100+ objects, spacecraft tracking, planetary shells,             â”‚
â”‚            exoplanets, comets with dual tails                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  â­  STELLAR PIPELINE  (15+ modules)                                        â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                        â”‚
â”‚                                                                             â”‚
â”‚  Gaia/Hipparcos/SIMBAD â”€â”€â†’ data_acquisition â”€â”€â†’ vot_cache_manager â”€â”€â†’      â”‚
â”‚  stellar_parameters â”€â”€â†’ visualization_3d/2d â”€â”€â†’ star_visualization_gui â”€â”€â†’  â”‚
â”‚  HR diagrams / 3D maps â”€â”€â†’ PNG/HTML                                         â”‚
â”‚                                                                             â”‚
â”‚  Features: 123,000+ stars, HR diagrams, stellar neighborhoods,              â”‚
â”‚            spectral classification                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                             â”‚
â”‚  ğŸŒ  EARTH SYSTEM PIPELINE  (3+ modules, growing)                           â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚                                                                             â”‚
â”‚  NOAA/NASA/NSIDC â”€â”€â†’ fetch_climate_data â”€â”€â†’ climate_cache_manager â”€â”€â†’      â”‚
â”‚  earth_system_visualization_gui â”€â”€â†’ 9 visualizations â”€â”€â†’ PNG/HTML           â”‚
â”‚                                                                             â”‚
â”‚  Features: COâ‚‚ (Keeling Curve), temperature, sea ice, sea level,            â”‚
â”‚            ocean pH, planetary boundaries, paleoclimate                      â”‚
â”‚                                                                             â”‚
â”‚  Mission: "Data Preservation is Climate Action"                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Architectural Insights

### 1. Clean Separation of Concerns
Each layer has a **single, well-defined responsibility**:
- Layers 1-2: Get data from outside world
- Layer 3: Protect data integrity  
- Layer 4: Transform data into usable form
- Layer 5: Prepare visualizations
- Layer 6: Present to user
- Layers 7-10: Report, support, output

### 2. Defense-in-Depth Cache Strategy (Layer 3)
The cache management layer acts as a **protective barrier** with:
- âœ“ Three specialized cache managers (orbit, stellar, climate)
- âœ“ Atomic save operations with validation
- âœ“ Automatic repair mechanisms (verify_orbit_cache.py)
- âœ“ Backup utilities (create_cache_backups.py)
- âœ“ Smart incremental updates to minimize redundant queries

**Result:** No data loss despite project complexity!

### 3. Modularity Enables Growth
Adding new features is straightforward:
- **New data source?** â†’ Add to Layer 2 (acquisition)
- **New visualization?** â†’ Add to Layer 5 (viz prep)
- **New GUI panel?** â†’ Add to Layer 6 (UI)

Each addition doesn't require refactoring other layers.

### 4. Cross-Cutting Architecture
Two layers support multiple other layers horizontally:
- **Configuration (Layer 9):** `constants_new.py` (174KB!) feeds Layers 4-6
- **Utilities (Layer 8):** Common tools support Layers 5-10

This is the **correct design pattern** for shared functionality.

### 5. Module Size Distribution
```
Layer 5 (Viz Prep):     27 modules  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Layer 4 (Processing):    8 modules  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Layer 6 (UI):            8 modules  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Layer 2 (Acquisition):   6 modules  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Layer 3 (Cache):         6 modules  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
Layer 8 (Utils):         5 modules  â–ˆâ–ˆâ–ˆâ–ˆ
Layer 7 (Reporting):     3 modules  â–ˆâ–ˆ
Layer 9 (Config):        2 modules  â–ˆ
```

The visualization preparation layer is **by far the largest** - this makes sense for a visualization-focused application!

### 6. Integration Points
```
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   palomas_orrery.py      â”‚
                   â”‚   (Main Integration)     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
    Solar System     Stellar Pipeline   Earth System
      Pipeline                             Pipeline
```

The main GUI serves as the **master integration point**, launching all three specialized data pipelines.

---

## Example Data Flow: Plotting Mars

```
User clicks "Mars" checkbox
          â†“
palomas_orrery.py (Layer 6)
          â†“
orbit_data_manager.py (Layer 2) â”€â†’ Check cache first
          â†“ (if not cached)
JPL Horizons API query (Layer 1)
          â†“
orbit_cache/mars.json (Layer 3) â”€â†’ Atomic save with validation
          â†“
refined_orbits.py (Layer 4) â”€â†’ Calculate refined position
          â†“
planet_visualization.py (Layer 5) â”€â†’ Prepare Mars trace
          â†“
mars_visualization_shells.py (Layer 5) â”€â†’ Interior structure (if enabled)
          â†“
plot_objects() in palomas_orrery.py (Layer 6) â”€â†’ Combine all traces
          â†“
Plotly rendering (Layer 6) â”€â†’ Interactive 3D plot
          â†“
save_utils.py (Layer 8) â”€â†’ Export PNG/HTML (Layer 10)
```

**Total time:** Milliseconds (cached) or 1-2 seconds (fresh API call)

---

## Architectural Benefits

âœ… **Modularity:** New features integrate at appropriate layer without refactoring  
âœ… **Robustness:** Multi-layer validation prevents data corruption  
âœ… **Maintainability:** Clear boundaries make debugging straightforward  
âœ… **Scalability:** Each pipeline can grow independently  
âœ… **Testability:** Each layer can be validated in isolation  
âœ… **Performance:** Intelligent caching at Layer 3 minimizes API calls  
âœ… **Reliability:** Defense-in-depth protects against data loss  

---

## Future Growth Patterns

As the Earth System pipeline expands with more climate visualizations, it may eventually warrant:
- Dedicated processing modules at Layer 4 (currently minimal)
- More specialized cache strategies at Layer 3
- Expansion of Layer 5 visualization prep modules

The architecture naturally accommodates this growth!

---

**For complete module details, see:** [MODULE_INDEX.md](MODULE_INDEX.md)  
**For mermaid flowchart, see:** `palomas_orrery_flowchart_v13_vertical.md`  

---

*Architecture documented November 6, 2025*  
*Paloma's Orrery - "Sky's the limit! Or stars are the limit!"*
